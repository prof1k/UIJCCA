@using UIJCCA.web.Models;
@{
    ViewBag.Title = "UIJCCA";
}

<div class="jumbotron">
    <h2>Единый информационный журнал заявок каналов связи ФГУП "Почта России"</h2>
    <p>Добавить информацию</p>    
</div>

<div class="row">    
    <div class="col-md-8">
        <section id="editForm">
            @using (Html.BeginForm("AddIncident", "Home", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
            {
                <div class="form-group">
                    <div class="col-md-10">
                        @*Html.DropDownListFor(m=>m.idObject, Model.idObject, new { @class = "form-control" })
                            @Html.ValidationMessageFor(m => m.idObject, "", new { @class = "text-danger" })*@
                        @Html.Label("Наименование ОПС")
                        @Html.TextBox("TypesOfService")
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-10">
                        @*Html.DropDownListFor(m=>m.idObject, Model.idObject, new { @class = "form-control" })
                            @Html.ValidationMessageFor(m => m.idObject, "", new { @class = "text-danger" })*@
                        @Html.Label("Индекс")
                        @Html.TextBox("TypesOfService")
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-10">
                        @*Html.DropDownListFor(m=>m.idObject, Model.idObject, new { @class = "form-control" })
                            @Html.ValidationMessageFor(m => m.idObject, "", new { @class = "text-danger" })*@
                        @Html.Label("Почтамт")
                        <select id="pochtamt">
                            <option value="volvo">Томский</option>
                            <option value="saab">Северский</option>
                        </select>
                    </div>
                </div>                
                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="submit" value="Отправить" class="btn btn-default" />
                    </div>
                </div>
            }
        </section>
    </div>    
</div>
@section Scripts {
    @Scripts.Render("~/scripts/validate.min.js")
    <script src='@Url.Content("~/Scripts/jquery-1.10.2.min.js")' type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $.ajax({
                type: 'GET',
                url: '/api/ApiPostOffice',
                // data: { get_param: 'value' },
                dataType: 'json',
                success: function (data) {
                    $.each(data, function (index, element) {
                        $('#pochtamt').append('<option value="'+ element.post +'">'  + element.post +  '</option>');
                        /*var table = '<table id="grid" border=1> <tr id="intr">';
                        $('#results').append(table);
                        $('#intr').append('<td>' + element.name + '</td>');
                        $('#intr').append('<td>' + element.surname + '</td>');
                        table = '</tr>';
                        $('#results').append(table);
                        table = '</table>';
                        $('#results').append(table);*/

                    });
                }
            });
    });
</script>
}
